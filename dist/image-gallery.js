!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ImageGallery=e()}}(function(){return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){var n=e("./lib/image-gallery");t.exports=n,n.LazyLoading=e("./lib/lazy-loading"),n.Responsive=e("./lib/responsive")},{"./lib/image-gallery":2,"./lib/lazy-loading":3,"./lib/responsive":4}],2:[function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);o.call(this),this.setMaxListeners(0);var r,s=this;r="string"==typeof e?h(e):e.length?e:[e],t=u({},l,t),t.use.forEach(function(e){if(!e)throw i();e(s,t)});var a=t.selectors.image;this.galleries=r.map(function(e){return s.createGallery(e,a)}),this.emit("init")}function r(e){if(e.complete)return{width:e.width,height:e.height};var t=c(e,"data-dimensions");if(!t)return null;var n=t.split(",").map(function(e){return parseInt(e,10)});return{width:n[0],height:n[1]}}function i(){return new Error("undefined extension, check options.use")}var o=e("events"),s=e("inherits"),u=e("xtend"),a=e("image-layout/layouts/fixed-partition"),l={selectors:{image:"img"},use:[]},f=e("./util/gallery-width"),h=e("./util/select-all"),c=e("./util/attr");s(n,o),t.exports=n,n.prototype.layout=function(e){var t=e.width=f(e),n=a(e.layoutData,{align:"center",containerWidth:t,idealElementHeight:e.imageHeight,spacing:e.imageSpacing||0});this.emit("gallery:layout",e,n),n.positions.forEach(function(t,n){var r=e.images[n];r.style.width=t.width+"px",r.style.height=t.height+"px"})},n.prototype.destroy=function(){this.emit("destroy")},n.prototype.createGallery=function(e,t){var n=this,i=h(t,e),o={element:e,images:i,imageHeight:300,layoutData:[],loading:i.length};return n.emit("gallery:create",o),i.forEach(function(e,t){var i=r(e);return i?n.setImageDimensions(o,t,i):void(e.onload=function(){n.setImageDimensions(o,t,r(e))})}),o},n.prototype.setImageDimensions=function(e,t,n){var r=this;e.loading--,e.layoutData[t]=n,e.loading<=0&&r.layout(e)}},{"./util/attr":5,"./util/gallery-width":6,"./util/select-all":9,events:10,"image-layout/layouts/fixed-partition":11,inherits:12,xtend:13}],3:[function(e,t){var n=e("./util/on"),r=e("./util/off"),i=e("./util/attr");t.exports=function(e){function t(t,n){var r=new Image;r.onload=function(){e.emit("image:preloaded",t,n,t.src),t.src=n},r.src=n}function o(e){e.preload=!0,e.images.forEach(function(e){var n=i(e,"data-full-src");n&&t(e,n)})}function s(){e.galleries.forEach(function(e){e.preload!==!0&&u(e.element)&&o(e)})}function u(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)}n(window,"touchmove",s),n(window,"scroll",s),e.on("init",s),e.on("destroy",function(){r(window,"touchmove",s),r(window,"scroll",s)})}},{"./util/attr":5,"./util/off":7,"./util/on":8}],4:[function(e,t){var n=e("./util/gallery-width"),r=e("./util/on"),i=e("./util/off");t.exports=function(e){var t=function(){e.galleries.forEach(function(t){var r=n(t);r!==t.width&&e.layout(t)})};r(window,"resize",t),e.on("destroy",function(){i(window,"resize",t)})}},{"./util/gallery-width":6,"./util/off":7,"./util/on":8}],5:[function(e,t){t.exports=function(e,t,n){return"undefined"==typeof n?e.getAttribute(t):void e.setAttribute(t,n)}},{}],6:[function(e,t){"use strict";t.exports=function(e){return e.element.offsetWidth}},{}],7:[function(e,t){t.exports=function(e,t,n){e.removeEventListener(t,n,!1)}},{}],8:[function(e,t){t.exports=function(e,t,n){e.addEventListener(t,n,!1)}},{}],9:[function(e,t){function n(e){return Array.prototype.slice.call(e)}t.exports=function(e,t){return n((t||document).querySelectorAll(e))}},{}],10:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,a,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(o(n))for(u=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,a=0;i>a;a++)l[a].apply(this,u);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],11:[function(e,t){t.exports=function(e,t){var r,i,o,s=[],u=t.spacing||0,a=t.containerWidth,l=t.idealElementHeight||a/3;if(!a)throw new Error("Invalid container width");var f,h=[],c=[];for(r=0,i=e.length;i>r;r++)f=e[r].width/e[r].height,h.push(f),c.push(Math.round(100*f));var p=0;for(r=0,i=h.length;i>r;r++)p+=h[r]*l;var v=Math.round(p/a);if(1>v){var d,g=0;o=e.length;var m=0;if("center"===t.align){for(var y=(o-1)*u,r=0;o>r;r++)y+=Math.round(l*h[r])-u*(o-1)/o;m=Math.floor((a-y)/2)}for(var r=0;o>r;r++)d=Math.round(l*h[r])-u*(o-1)/o,s.push({y:0,x:m+g,width:d,height:l}),g+=d,r!==i-1&&(g+=u);x=l}else{var g,w=n(c,v),_=0,x=0;for(r=0,i=w.length;i>r;r++){var L=_,b=0;for(j=0,k=w[r].length;j<k;j++)b+=h[L+j],_++;for(g=0,height=Math.round(a/b),o=w[r].length,j=0;j<o;j++)d=Math.round((a-(o-1)*u)/b*h[L+j]),s.push({y:x,x:g,width:d,height:height}),g+=d,j!==o-1&&(g+=u);x+=height,r!==i-1&&(x+=u)}}return{width:a,height:x,positions:s}};var n=function(e,t){var n,r,i,o,s,u,a,l,f,h,c,p,v,d,g;if(s=e.length,0>=t)return[];if(t>s)return e.map(function(e){return[e]});for(a=function(){var e,n;for(n=[],f=e=0;s>=0?s>e:e>s;f=s>=0?++e:--e)n.push(function(){var e,n;for(n=[],l=e=0;t>=0?t>e:e>t;l=t>=0?++e:--e)n.push(0);return n}());return n}(),u=function(){var e,n,r;for(r=[],f=e=0,n=s-1;n>=0?n>e:e>n;f=n>=0?++e:--e)r.push(function(){var e,n,r;for(r=[],l=e=0,n=t-1;n>=0?n>e:e>n;l=n>=0?++e:--e)r.push(0);return r}());return r}(),r=h=0;s>=0?s>h:h>s;r=s>=0?++h:--h)a[r][0]=e[r]+(r?a[r-1][0]:0);for(i=c=0;t>=0?t>c:c>t;i=t>=0?++c:--c)a[0][i]=e[0];for(r=p=1;s>=1?s>p:p>s;r=s>=1?++p:--p)for(i=v=1;t>=1?t>v:v>t;i=t>=1?++v:--v){for(o=[],l=d=0;r>=0?r>d:d>r;l=r>=0?++d:--d)o.push([Math.max(a[l][i-1],a[r][0]-a[l][0]),l]);var m,y=!1;for(d=0,g=o.length;g>d;d++)(0===d||o[d][0]<m)&&(m=o[d][0],y=d);o=o[y],a[r][i]=o[0],u[r-1][i-1]=o[1]}for(s-=1,t-=2,n=[];t>=0;)n=[function(){var n,i,o,a;for(a=[],r=n=i=u[s-1][t]+1,o=s+1;o>=i?o>n:n>o;r=o>=i?++n:--n)a.push(e[r]);return a}()].concat(n),s=u[s-1][t],t-=1;return[function(){var t,n,i;for(i=[],r=t=0,n=s+1;n>=0?n>t:t>n;r=n>=0?++t:--t)i.push(e[r]);return i}()].concat(n)}},{}],12:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],13:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}t.exports=n;var r=Object.prototype.hasOwnProperty},{}]},{},[1])(1)});